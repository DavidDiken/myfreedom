<?php

namespace App\Http\Controllers;

class PageController extends Controller
{
    public function home()
    {
        return view('home');
    }

    public function tariff(string $tariffKey)
    {
        return $this->renderTariffPage($tariffKey);
    }

    private function renderTariffPage(string $tariffKey)
    {
        $tariffs = $this->tariffs();
        $stages = $this->courseStages();

        abort_unless(isset($tariffs[$tariffKey]), 404);

        return view('tariff', [
            'currentTariff' => $tariffs[$tariffKey],
            'tariffs' => $tariffs,
            'stages' => $stages,
        ]);
    }

    private function tariffs(): array
    {
        return [
            'basic' => [
                'slug' => 'basic',
                'name' => 'Basic',
                'label' => 'BASIC',
                'title' => 'Тариф BASIC',
                'hero_tag' => '#РемонтПідОренду',
                'hero_heading' => 'Тариф BASIC — старт для впевненого ремонту під оренду',
                'hero_subheading' => 'Все необхідне, щоб структурувати ремонт і не втратити бюджет: гіди, матриці та шаблони з досвіду MYFREEDOM.',
                'price' => '$950',
                'cta_label' => 'Отримати доступ',
                'cta_target' => '#consultation-form',
                'summary' => [
                    'Швидкий старт на базі перевірених шаблонів',
                    'Скорочені версії матеріалів для самостійної підготовки',
                    'Контроль ключових рішень без супроводу куратора',
                ],
                'badge' => 'Рекомендовано інвесторам, які роблять ремонт вперше',
                'accent' => 'Ви отримуєте фокус на стратегічних рішеннях та економію бюджету.',
            ],
            'standard' => [
                'slug' => 'standard',
                'name' => 'Standard',
                'label' => 'STANDARD',
                'title' => 'Тариф STANDARD',
                'hero_tag' => '#РемонтПідОренду',
                'hero_heading' => 'Тариф STANDARD — повний пакет матеріалів і сценаріїв',
                'hero_subheading' => 'Розширені шаблони, приклади сценаріїв і додаткові інструменти для контролю кожного етапу.',
                'price' => '$1500',
                'cta_label' => 'Почати з STANDARD',
                'cta_target' => '#consultation-form',
                'summary' => [
                    'Повні версії чек-листів, відео та прикладів',
                    'Готові сценарії комунікації з майстрами',
                    'Рекомендації по матеріалах і меблях з бюджету mid-range',
                ],
                'badge' => 'Оптимальний баланс інструментів та самостійності',
                'accent' => 'Ви тримаєте процес під контролем і знаєте, що вимагати від підрядників.',
            ],
            'premium' => [
                'slug' => 'premium',
                'name' => 'Premium',
                'label' => 'PREMIUM',
                'title' => 'Тариф PREMIUM',
                'hero_tag' => '#РемонтПідОренду',
                'hero_heading' => 'Тариф PREMIUM — найповніший пакет з персональними рекомендаціями',
                'hero_subheading' => 'Детальні гіди, калькулятори, приклади договорів і персональні консультації команди MYFREEDOM.',
                'price' => '3%',
                'cta_label' => 'Забронювати PREMIUM',
                'cta_target' => '#consultation-form',
                'summary' => [
                    'Персоналізовані рекомендації по комплектації та бюджетах',
                    'Детальні калькулятори витрат і окупності',
                    'Розширений набір документів для контролю підрядників',
                ],
                'badge' => 'Для інвесторів, які хочуть делегувати максимум',
                'accent' => 'Готові рішення з адаптацією під ваш об’єкт та сценарій здачі.',
            ],
        ];
    }

    private function courseStages(): array
    {
        return [
            [
                'id' => 'analysis',
                'title' => 'АНАЛІЗ',
                'description' => 'Розуміємо потенціал об’єкта, прораховуємо бюджет і формуємо концепцію.',
                'lessons' => [
                    [
                        'name' => 'Модуль інтро — Аналіз квартири перед ремонтом',
                        'what_is' => 'Це перший і найважливіший етап підготовки до ремонту, який допомагає зрозуміти , для чого ви робите ремонт, як має виглядати результат і скільки він реально коштуватиме.',
                        'questions' => [
                            'Яка ціль квартири: продаж, оренда чи особисте проживання.',
                            'Як оцінити локацію та зрозуміти, який тип ремонту там доречний.',
                            'Чи підходить поточне планування під ваші задачі.',
                            'Як обрати правильну комплектацію та рівень матеріалів.',
                            'Як сформувати реалістичний бюджет.',
                        ],
                        'results' => [
                            'Чітке бачення, що і навіщо ви робите',
                            'Розуміння потенціалу та обмежень своєї квартири.',
                            'Базове технічне завдання (ТЗ) для дизайнера та прораба.',
                            'Захист від типових помилок і перерв.',
                        ],
                        'available_in' => ['basic', 'standard', 'premium'],
                    ],
                    [
                        'name' => 'Модуль 1. Визначення цілей квартири',
                        'what_is' => 'Перший крок, з якого починається будь-який ремонт. Ми визначаємо, для чого призначена квартира: для продажу, оренди чи особистого проживання.',
                        'questions' => [
                            'Яка ваша основна ціль: прибуток, комфорт, інвестиція.',
                            'Як ціль впливає на тип ремонту, стиль і матеріали.',
                            'Чому неправильне визначення цілі призводить до перевитрат та низької ліквідності.',
                        ],
                        'results' => [
                            'Чітко розумієте, навіщо робите ремонт.',
                            'Маєте основу для всіх наступних рішень.',
                            'Уникаєте хаотичного вибору рішень по ходу робіт.',
                        ],
                        'available_in' => ['basic', 'standard', 'premium'],
                    ],
                    [
                        'name' => 'Модуль 2. Аналіз локації',
                        'what_is' => 'Оцінка району та будинку з точки зору попиту, конкуренції, типу оренди чи потенційної ціни продажу.',
                        'questions' => [
                            'Як оцінити район на привабливість для оренди або продажу.',
                            'Чому одна й та сама квартира в різних районах потребує різного підходу.',
                            'Фактори, що знижують або підвищують цінність (інфраструктура, транспорт, конкуренція, рік побудови).',
                        ],
                        'results' => [
                            'Розумієте сильні та слабкі сторони локації.',
                            'Можете обрати правильний формат ремонту під конкретне місце.',
                        ],
                        'available_in' => ['basic', 'standard', 'premium'],
                        'available_label' => 'STANDARD / PREMIUM',
                    ],
                    [
                        'name' => 'Модуль 3. Аналіз планування квартири',
                        'what_is' => 'Оцінка поточного планування: чи підходить воно для вашої цілі та чи потрібні зміни.',
                        'questions' => [
                            'Як читати планування і бачити потенційні проблеми.',
                            'Коли перепланування виправдане.',
                            'Приклади ефективних і неефективних планів для оренди, продажу, життя.',
                        ],
                        'results' => [
                            'Розумієте, чи потрібно змінювати планування.',
                            'Знаєте, як планування вплине на ціну, швидкість здачі чи комфорт.',
                        ],
                        'available_in' => ['basic', 'standard', 'premium'],
                        'available_label' => 'STANDARD / PREMIUM',
                    ],
                    [
                        'name' => 'Модуль 4. Вибір типу ремонту та комплектації',
                        'what_is' => 'Підбір рівня ремонту (економ, комфорт, преміум) і комплектації (меблі, техніка, оздоблення) під вашу ціль і бюджет.',
                        'questions' => [
                            'Чим відрізняються типи ремонту та коли кожен з них доречний.',
                            'Які матеріали підходять під оренду, продаж або проживання.',
                            'Як уникнути “перекомплектації” та зайвих витрат.',
                        ],
                        'results' => [
                            'Маєте чіткий набір характеристик майбутнього ремонту.',
                            'Знаєте, що купувати, а від чого відмовитися.',
                        ],
                        'available_in' => ['basic', 'standard', 'premium'],
                        'available_label' => 'PREMIUM',
                    ],
                    [
                        'name' => 'Модуль 5. Формування реалістичного бюджету',
                        'what_is' => 'Підрахунок усіх витрат на ремонт, меблі, техніку, з урахуванням резерву на непередбачене.',
                        'questions' => [
                            'Як скласти повний бюджет з урахуванням усіх етапів.',
                            'Які витрати часто забувають включити.',
                            'Як підготувати фінансову подушку, щоб завершити ремонт вчасно.',
                        ],
                        'results' => [
                            'Маєте реальний бюджет без “сюрпризів” у процесі.',
                            'Знаєте, де можна зекономити без втрати якості.',
                        ],
                        'available_in' => ['standard', 'premium'],
                        'available_label' => 'STANDARD / PREMIUM',
                    ],
                    [
                        'name' => 'Модуль 6. Створення технічного завдання (ТЗ)',
                        'what_is' => 'Фінал блоку “Аналіз” — оформлення всіх рішень у єдиний документ для дизайнера або прораба.',
                        'questions' => [
                            'Як зібрати все, що ви визначили, в одне ТЗ.',
                            'Які дані критично важливі для старту робіт.',
                            'Як ТЗ економить ваші гроші та нерви.',
                        ],
                        'results' => [
                            'Маєте готовий документ, з яким можна йти до дизайнера або прораба.',
                            'Зберігаєте контроль над процесом і кінцевим результатом.',
                        ],
                        'available_in' => ['premium'],
                        'available_label' => 'PREMIUM',
                    ],
                ],
            ],
            [
                'id' => 'product',
                'title' => 'ПРОДУКТ',
                'description' => 'Створюємо дизайн-проєкт, комплектацію та контролюємо постачання.',
                'lessons' => [
                    [
                        'name' => 'Модуль Інтро — Продукт',
                        'what_is' => 'Ви вже знаєте ціль, бюджет та бачите, якою має бути ваша квартира. Тепер час оживити цю ідею на папері та візуалізаціях. Блок Продукт - це перетворення ваших рішень з етапу Аналіз у готовий дизайн-проект та пакет креслень для реалізаціїї',
                        'questions' => [
                            'Як обрати  та працювати з дизайнером, щоб він створив продукт під вашу стратегію',
                            'Що має бути в дизайн-проєкті;',
                            'Як затвердити  стиль і функціональне  планування; ',
                            'Як уникнути розбіжностей між кресленнями і реальністю',
                        ],
                        'results' => [
                            'Маєте проєкт, який відповідає цілі та бюджету; ',
                            'Маєте інструкції та інструмент контролю виконання робіт',
                            'Готові передати проект у реалізацію без додаткових питань.',
                        ],
                        'available_in' => ['basic', 'standard', 'premium'],
                    ],
                    [
                        'name' => 'Модуль 1. Вибір дизайнера та формування ТЗ',
                        'what_is' => 'Як обрати дизайнера, який працюватиме під ваші цілі, та як сформувати чітке ТЗ саме для підготовки технічної документації',
                        'questions' => [
                            'Як відбирати дизайнера ( критерії, портфоліо, досвід)',
                            'Що обовязково має бути в ТЗ для дизайнеоа',
                            'Як зафіксувати результат і терміни.',
                        ],
                        'results' => [
                            'Маєте перевірений алгоритм вибору дизайнера',
                            'Готове ТЗ на розробку технічної документації',
                        ],
                        'available_in' => ['basic', 'standard', 'premium'],
                    ],
                    [
                        'name' => 'Модуль 2. Пакет креслень і документації',
                        'what_is' => 'Розбір різних рівнів комплектації дизайн проектів',
                        'questions' => [
                            'Які креслення обовязкові, які додаткові, навіщо вони потрібні',
                            'Візуалізація ( коли вона реально потрібна і чим може допомогти, а коли - зайва)',
                        ],
                        'results' => [
                            'Розуміння, який пакет потрібен саме вам і список документів, які ви повинні отримати',
                        ],
                        'available_in' => ['basic', 'standard', 'premium'],
                    ],
                    [
                        'name' => 'Модуль 3. Стиль та кольорова концепція',
                        'what_is' => 'Розробка візуального образу квартири, який відповідає цілі та бюджету.',
                        'questions' => [
                            'Як вибрати стиль;',
                            'Як поєднувати кольори і матеріали;',
                            'Як перевірити відповідність цілі.',
                        ],
                        'results' => [
                            'Маєте затверджену стилістичну концепцію;',
                            'Розумієте вплив на ліквідність.',
                        ],
                        'available_in' => ['basic', 'standard', 'premium'],
                    ],
                    [
                        'name' => 'Модуль 4. Функціональне планування',
                        'what_is' => 'Створення зручного, функціонального планування, яке відповідає цілі квартири.',
                        'questions' => [
                            'Як перевірити та погодити планування;',
                            'Як уникнути поширених помилок; ',
                            'Як узгодити з комплектацією.',
                        ],
                        'results' => [
                            'Маєте фінальне планування без помилок; ',
                            'Уникаєте перевитрат.',
                        ],
                        'available_in' => ['basic', 'standard', 'premium'],
                    ],
                    [
                        'name' => 'Модуль 5. Авторський нагляд і листи комплектації',
                        'what_is' => 'Додаткові послуги дизайнера для спрощення реалізації та закупівель.',
                        'questions' => [
                            'Що таке авторський нагляд; ',
                            'Що таке листи комплектації; ',
                            'Як перевірити повноту комплектації.',
                        ],
                        'results' => [
                            'Розумієте, які послуги варті інвестицій;',
                            'Маєте повну комплектацію.',
                        ],
                        'available_in' => ['standard', 'premium'],
                        'available_label' => 'STANDARD / PREMIUM',
                    ],
                    [
                        'name' => 'Модуль 6. Фінальна перевірка пакету документів',
                        'what_is' => 'Заключна перевірка всього пакету креслень і документації перед реалізацією.',
                        'questions' => [
                            'Що перевірити в кожному кресленні',
                            'Чи відповідає проект цілі та бюджету',
                            'Технічні нюанси',
                        ],
                        'results' => [
                            'Готовий перевірений пакет документів для старту блоку Реалізація',
                        ],
                        'available_in' => ['standard', 'premium'],
                        'available_label' => 'STANDARD / PREMIUM',
                    ],
                ],
            ],
            [
                'id' => 'realisation',
                'title' => 'РЕАЛІЗАЦІЯ',
                'description' => 'Контролюємо виконання, приймаємо роботи та готуємо до оренди.',
                'lessons' => [
                    [
                        'name' => 'Модуль 10. Авторський нагляд та комунікація',
                        'what_is' => 'Скрипти взаємодії з майстрами, графіки контрольних точок та чек-листи прийому робіт.',
                        'questions' => [
                            'Як контролювати якість без постійної присутності',
                            'Які документи підписувати з підрядниками',
                        ],
                        'results' => [
                            'Впевнено ведете комунікацію та фіксуєте результати',
                            'Маєте документи для вирішення спірних ситуацій',
                        ],
                        'available_in' => ['basic', 'standard', 'premium'],
                    ],
                    [
                        'name' => 'Модуль 11. Приймання робіт і фінальна перевірка',
                        'what_is' => 'Контрольні чек-листи, акти огляду та рекомендації щодо фінального дотику.',
                        'questions' => [
                            'Що перевіряти перед підписанням актів',
                            'Як підготувати квартиру до фотосесії та здачі',
                        ],
                        'results' => [
                            'Маєте покроковий чек-лист приймання',
                            'Готові до запуску маркетингової кампанії',
                        ],
                        'available_in' => ['basic', 'standard', 'premium'],
                    ],
                    [
                        'name' => 'Модуль 12. Документи для здачі і запуску продажів',
                        'what_is' => 'Набір шаблонів договорів, актів і листів для орендарів.',
                        'questions' => [
                            'Які договори використати для довгострокової та короткострокової оренди',
                            'Як оформити передачу квартири без ризиків',
                        ],
                        'results' => [
                            'Готовий пакет документів і скриптів',
                            'План дій для швидкого заселення першого гостя',
                        ],
                        'available_in' => ['basic', 'standard', 'premium'],
                    ],
                ],
            ],
        ];
    }
}
