<?php

namespace App\Http\Controllers;

class PageController extends Controller
{
    public function home()
    {
        return view('home');
    }

    public function tariff(string $tariffKey)
    {
        return $this->renderTariffPage($tariffKey);
    }

    private function renderTariffPage(string $tariffKey)
    {
        $tariffs = $this->tariffs();
        $stages = $this->courseStages();

        abort_unless(isset($tariffs[$tariffKey]), 404);

        return view('tariff', [
            'currentTariff' => $tariffs[$tariffKey],
            'tariffs' => $tariffs,
            'stages' => $stages,
        ]);
    }

    private function tariffs(): array
    {
        return [
            'basic' => [
                'slug' => 'basic',
                'name' => 'Basic',
                'label' => 'BASIC',
                'title' => 'Тариф BASIC',
                'hero_tag' => '#РемонтПідОренду',
                'hero_heading' => 'Тариф BASIC — старт для впевненого ремонту під оренду',
                'hero_subheading' => 'Все необхідне, щоб структурувати ремонт і не втратити бюджет: гіди, матриці та шаблони з досвіду MYFREEDOM.',
                'price' => '$950',
                'cta_label' => 'Отримати доступ',
                'cta_target' => '#consultation-form',
                'summary' => [
                    'Швидкий старт на базі перевірених шаблонів',
                    'Скорочені версії матеріалів для самостійної підготовки',
                    'Контроль ключових рішень без супроводу куратора',
                ],
                'badge' => 'Рекомендовано інвесторам, які роблять ремонт вперше',
                'accent' => 'Ви отримуєте фокус на стратегічних рішеннях та економію бюджету.',
            ],
            'standard' => [
                'slug' => 'standard',
                'name' => 'Standard',
                'label' => 'STANDARD',
                'title' => 'Тариф STANDARD',
                'hero_tag' => '#РемонтПідОренду',
                'hero_heading' => 'Тариф STANDARD — повний пакет матеріалів і сценаріїв',
                'hero_subheading' => 'Розширені шаблони, приклади сценаріїв і додаткові інструменти для контролю кожного етапу.',
                'price' => '$1500',
                'cta_label' => 'Почати з STANDARD',
                'cta_target' => '#consultation-form',
                'summary' => [
                    'Повні версії чек-листів, відео та прикладів',
                    'Готові сценарії комунікації з майстрами',
                    'Рекомендації по матеріалах і меблях з бюджету mid-range',
                ],
                'badge' => 'Оптимальний баланс інструментів та самостійності',
                'accent' => 'Ви тримаєте процес під контролем і знаєте, що вимагати від підрядників.',
            ],
            'premium' => [
                'slug' => 'premium',
                'name' => 'Premium',
                'label' => 'PREMIUM',
                'title' => 'Тариф PREMIUM',
                'hero_tag' => '#РемонтПідОренду',
                'hero_heading' => 'Тариф PREMIUM — найповніший пакет з персональними рекомендаціями',
                'hero_subheading' => 'Детальні гіди, калькулятори, приклади договорів і персональні консультації команди MYFREEDOM.',
                'price' => '3%',
                'cta_label' => 'Забронювати PREMIUM',
                'cta_target' => '#consultation-form',
                'summary' => [
                    'Персоналізовані рекомендації по комплектації та бюджетах',
                    'Детальні калькулятори витрат і окупності',
                    'Розширений набір документів для контролю підрядників',
                ],
                'badge' => 'Для інвесторів, які хочуть делегувати максимум',
                'accent' => 'Готові рішення з адаптацією під ваш об’єкт та сценарій здачі.',
            ],
        ];
    }

    private function courseStages(): array
    {
        return [
            [
                'id' => 'analysis',
                'title' => 'АНАЛІЗ',
                'description' => 'Розуміємо потенціал об’єкта, прораховуємо бюджет і формуємо концепцію.',
                'lessons' => [
                    [
                        'name' => 'Модуль інтро — Аналіз квартири перед ремонтом',
                        'what_is' => 'Це перший і найважливіший етап підготовки до ремонту, який допомагає зрозуміти , для чого ви робите ремонт, як має виглядати результат і скільки він реально коштуватиме.',
                        'questions' => [
                            'Яка ціль квартири: продаж, оренда чи особисте проживання.',
                            'Як оцінити локацію та зрозуміти, який тип ремонту там доречний.',
                            'Чи підходить поточне планування під ваші задачі.',
                            'Як обрати правильну комплектацію та рівень матеріалів.',
                            'Як сформувати реалістичний бюджет.',
                        ],
                        'results' => [
                            'Знаєте, з чого почати аналіз і на що спиратися',
                            'Розумієте очікування ринку і свою фінансову модель',
                        ],
                        'available_in' => ['basic', 'standard', 'premium'],
                    ],
                    [
                        'name' => 'Модуль 1. Визначення цілей квартири',
                        'what_is' => 'Визначення формату оренди, цільової аудиторії та бажаного прибутку.',
                        'questions' => [
                            'Як поєднати особисті цілі з попитом орендарів',
                            'Які формати здачі обрати для різних локацій',
                        ],
                        'results' => [
                            'Маєте сформовану матрицю цілей',
                            'Розумієте, яку дохідність прагнете отримати',
                        ],
                        'available_in' => ['basic', 'standard', 'premium'],
                    ],
                    [
                        'name' => 'Модуль 2. Аналіз локації',
                        'what_is' => 'Оцінка району, транспортної доступності, конкуренції та ризиків.',
                        'questions' => [
                            'Як виміряти попит та конкуренцію в локації',
                            'Які фактори впливають на середню ставку оренди',
                        ],
                        'results' => [
                            'Розумієте сильні та слабкі сторони локації',
                            'Можете обґрунтовано сформувати бажану ставку',
                        ],
                        'available_in' => ['standard', 'premium'],
                        'available_label' => 'STANDARD / PREMIUM',
                    ],
                    [
                        'name' => 'Модуль 3. Аналіз планування квартири',
                        'what_is' => 'Оцінюємо існуюче планування, зони, сценарії та потенціал перепланування.',
                        'questions' => [
                            'Які сценарії зонування будуть трендовими на ринку',
                            'Як визначити слабкі місця планування та виправити їх',
                        ],
                        'results' => [
                            'Маєте кілька варіантів планувальних рішень',
                            'Готовий план технічного завдання для дизайнера',
                        ],
                        'available_in' => ['standard', 'premium'],
                        'available_label' => 'STANDARD / PREMIUM',
                    ],
                    [
                        'name' => 'Модуль 4. Формування бюджету ремонту',
                        'what_is' => 'Підбір рівня ремонту, меблів і техніки з прорахунком бюджету.',
                        'questions' => [
                            'Як прорахувати бюджет на різні сценарії ремонту',
                            'Які статті витрат часто ігнорують підрядники',
                        ],
                        'results' => [
                            'Маєте робочий бюджет без «сюрпризів»',
                            'Розумієте, де можна оптимізувати витрати',
                        ],
                        'available_in' => ['premium'],
                        'available_label' => 'PREMIUM',
                    ],
                    [
                        'name' => 'Модуль 5. Створення технічного завдання (ТЗ)',
                        'what_is' => 'Формуємо пакет документів для дизайнерів і підрядників з прикладами.',
                        'questions' => [
                            'Як зібрати вимоги до матеріалів та робіт',
                            'Які документи потрібні для контролю підрядників',
                        ],
                        'results' => [
                            'Маєте готові шаблони ТЗ',
                            'Можете передати завдання без постійної участі',
                        ],
                        'available_in' => ['premium'],
                        'available_label' => 'PREMIUM',
                    ],
                ],
            ],
            [
                'id' => 'product',
                'title' => 'ПРОДУКТ',
                'description' => 'Створюємо дизайн-проєкт, комплектацію та контролюємо постачання.',
                'lessons' => [
                    [
                        'name' => 'Модуль 6. Підбір дизайнера та формування ТЗ',
                        'what_is' => 'Допомагаємо вибрати і бріфувати дизайнера або створити ТЗ самостійно.',
                        'questions' => [
                            'Які критерії вибору дизайнера',
                            'Що має містити бриф, щоб уникнути переробок',
                        ],
                        'results' => [
                            'Готові до ефективної співпраці з дизайнером',
                            'Фіксуєте очікуваний результат у договорі',
                        ],
                        'available_in' => ['standard', 'premium'],
                        'available_label' => 'STANDARD / PREMIUM',
                    ],
                    [
                        'name' => 'Модуль 7. Пакет креслень і документації',
                        'what_is' => 'Комплект креслень, специфікацій і візуалізацій для підрядників.',
                        'questions' => [
                            'Як читати креслення і передавати їх майстрам',
                            'Які документи потрібні для закупівель та монтажу',
                        ],
                        'results' => [
                            'Маєте повний пакет робочої документації',
                            'Команда розуміє, що і коли постачати',
                        ],
                        'available_in' => ['premium'],
                        'available_label' => 'PREMIUM',
                    ],
                    [
                        'name' => 'Модуль 8. Підбір стилю та кольорової концепції',
                        'what_is' => 'Збираємо moodboard, палету кольорів та приклади реалізацій.',
                        'questions' => [
                            'Як підібрати стиль під цільову аудиторію',
                            'Як уникнути зайвих витрат на декор',
                        ],
                        'results' => [
                            'Маєте узгоджену концепцію та шот-лист закупівель',
                            'Знаєте, як підтримувати стиль у кожному просторі',
                        ],
                        'available_in' => ['basic', 'standard', 'premium'],
                    ],
                    [
                        'name' => 'Модуль 9. Функціональне планування',
                        'what_is' => 'Створюємо план розстановки меблів, зон і функцій для оренди.',
                        'questions' => [
                            'Як організувати простір для різних сценаріїв проживання',
                            'Які елементи підвищують середній чек',
                        ],
                        'results' => [
                            'Знаєте, яку комплектацію підготувати до здачі',
                            'Отримуєте схеми для монтажу та контролю',
                        ],
                        'available_in' => ['standard', 'premium'],
                        'available_label' => 'STANDARD / PREMIUM',
                    ],
                ],
            ],
            [
                'id' => 'realisation',
                'title' => 'РЕАЛІЗАЦІЯ',
                'description' => 'Контролюємо виконання, приймаємо роботи та готуємо до оренди.',
                'lessons' => [
                    [
                        'name' => 'Модуль 10. Авторський нагляд та комунікація',
                        'what_is' => 'Скрипти взаємодії з майстрами, графіки контрольних точок та чек-листи прийому робіт.',
                        'questions' => [
                            'Як контролювати якість без постійної присутності',
                            'Які документи підписувати з підрядниками',
                        ],
                        'results' => [
                            'Впевнено ведете комунікацію та фіксуєте результати',
                            'Маєте документи для вирішення спірних ситуацій',
                        ],
                        'available_in' => ['premium'],
                        'available_label' => 'PREMIUM',
                    ],
                    [
                        'name' => 'Модуль 11. Приймання робіт і фінальна перевірка',
                        'what_is' => 'Контрольні чек-листи, акти огляду та рекомендації щодо фінального дотику.',
                        'questions' => [
                            'Що перевіряти перед підписанням актів',
                            'Як підготувати квартиру до фотосесії та здачі',
                        ],
                        'results' => [
                            'Маєте покроковий чек-лист приймання',
                            'Готові до запуску маркетингової кампанії',
                        ],
                        'available_in' => ['standard', 'premium'],
                        'available_label' => 'STANDARD / PREMIUM',
                    ],
                    [
                        'name' => 'Модуль 12. Документи для здачі і запуску продажів',
                        'what_is' => 'Набір шаблонів договорів, актів і листів для орендарів.',
                        'questions' => [
                            'Які договори використати для довгострокової та короткострокової оренди',
                            'Як оформити передачу квартири без ризиків',
                        ],
                        'results' => [
                            'Готовий пакет документів і скриптів',
                            'План дій для швидкого заселення першого гостя',
                        ],
                        'available_in' => ['premium'],
                        'available_label' => 'PREMIUM',
                    ],
                ],
            ],
        ];
    }
}
